<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>GitHub Dark Style - Color Preview</title>
        <style>
            * {
                box-sizing: border-box;
            }
            body {
                font-family: "Consolas", "Monaco", "Courier New", monospace;
                background: #0d1117;
                color: #c9d1d9;
                padding: 2rem;
                line-height: 1.6;
            }
            h1 {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica,
                    Arial, sans-serif;
                margin-bottom: 1.5rem;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
            }
            .code-block {
                background: #161b22;
                border: 1px solid #30363d;
                border-radius: 6px;
                overflow: hidden;
            }
            .code-line {
                display: flex;
                align-items: center;
                padding: 0.25rem 1rem;
                border-bottom: 1px solid #21262d;
            }
            .code-line:last-child {
                border-bottom: none;
            }
            .code-line:hover {
                background: #1f2428;
            }
            .line-number {
                width: 40px;
                color: #8b949e;
                text-align: right;
                padding-right: 1rem;
                user-select: none;
                flex-shrink: 0;
            }
            .code-content {
                flex: 1;
                white-space: pre;
                overflow-x: auto;
            }
            .color-boxes {
                display: flex;
                gap: 0.5rem;
                margin-left: 1rem;
                flex-shrink: 0;
            }
            .color-box {
                width: 24px;
                height: 24px;
                border-radius: 4px;
                border: 1px solid #484f58;
                position: relative;
                cursor: pointer;
            }
            .color-box:hover::after {
                content: attr(data-color);
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%);
                background: #c9d1d9;
                color: #0d1117;
                padding: 0.25rem 0.5rem;
                border-radius: 4px;
                font-size: 12px;
                white-space: nowrap;
                margin-bottom: 4px;
                z-index: 10;
            }
            .legend {
                margin-top: 2rem;
                background: #161b22;
                border: 1px solid #30363d;
                border-radius: 6px;
                padding: 1rem;
            }
            .legend h2 {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica,
                    Arial, sans-serif;
                margin-top: 0;
            }
            .legend-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 0.75rem;
            }
            .legend-item {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            .legend-color {
                width: 20px;
                height: 20px;
                border-radius: 4px;
                border: 1px solid #484f58;
                flex-shrink: 0;
            }
            .legend-label {
                font-size: 14px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>GitHub Dark Style - Color Preview</h1>
            <div class="code-block" id="code-block"></div>
            <div class="legend">
                <h2>Color Legend</h2>
                <div class="legend-grid" id="legend"></div>
            </div>
        </div>

        <script>
            const code = `export const githubDarkStyle: CreateThemeOptions['styles'] = [
  { tag: [t.standard(t.tagName), t.tagName], color: '#7ee787' },
  { tag: [t.comment, t.bracket], color: '#8b949e' },
  { tag: [t.className, t.propertyName], color: '#d2a8ff' },
  { tag: [t.variableName, t.attributeName, t.number, t.operator], color: '#79c0ff' },
  { tag: [t.keyword, t.typeName, t.typeOperator, t.typeName], color: '#ff7b72' },
  { tag: [t.string, t.meta, t.regexp], color: '#a5d6ff' },
  { tag: [t.name, t.quote], color: '#7ee787' },
  { tag: [t.heading, t.strong], color: '#d2a8ff', fontWeight: 'bold' },
  { tag: [t.emphasis], color: '#d2a8ff', fontStyle: 'italic' },
  { tag: [t.deleted], color: '#ffdcd7', backgroundColor: 'ffeef0' },
  { tag: [t.atom, t.bool, t.special(t.variableName)], color: '#ffab70' },
  { tag: t.link, textDecoration: 'underline' },
  { tag: t.strikethrough, textDecoration: 'line-through' },
  { tag: t.invalid, color: '#f97583' },
];`;

            // Extract colors from each line
            function extractColors(line) {
                const colorRegex = /#[0-9a-fA-F]{6}/g;
                const matches = line.match(colorRegex);
                return matches ? [...new Set(matches)] : [];
            }

            // Build the code display
            const codeBlock = document.getElementById("code-block");
            const lines = code.split("\n");
            const allColors = new Map();

            lines.forEach((line, index) => {
                const colors = extractColors(line);

                // Track colors for legend
                colors.forEach((color) => {
                    if (!allColors.has(color)) {
                        // Try to extract what tags this color is for
                        const tagMatch = line.match(/tag:\s*\[?([^\]]+)\]?,/);
                        const tags = tagMatch ? tagMatch[1].trim() : "";
                        allColors.set(color, tags);
                    }
                });

                const lineEl = document.createElement("div");
                lineEl.className = "code-line";

                const lineNum = document.createElement("span");
                lineNum.className = "line-number";
                lineNum.textContent = index + 1;

                const content = document.createElement("span");
                content.className = "code-content";
                content.textContent = line;

                const colorBoxes = document.createElement("div");
                colorBoxes.className = "color-boxes";

                colors.forEach((color) => {
                    const box = document.createElement("div");
                    box.className = "color-box";
                    box.style.backgroundColor = color;
                    box.setAttribute("data-color", color);
                    colorBoxes.appendChild(box);
                });

                lineEl.appendChild(lineNum);
                lineEl.appendChild(content);
                lineEl.appendChild(colorBoxes);
                codeBlock.appendChild(lineEl);
            });

            // Build the legend
            const legend = document.getElementById("legend");
            allColors.forEach((tags, color) => {
                const item = document.createElement("div");
                item.className = "legend-item";

                const colorBox = document.createElement("div");
                colorBox.className = "legend-color";
                colorBox.style.backgroundColor = color;

                const label = document.createElement("span");
                label.className = "legend-label";
                label.textContent = color;

                item.appendChild(colorBox);
                item.appendChild(label);
                legend.appendChild(item);
            });
        </script>
    </body>
</html>
